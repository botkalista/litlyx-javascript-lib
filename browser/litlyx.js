!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i=t();for(var s in i)("object"==typeof exports?exports:e)[s]=i[s]}}(self,(()=>{return e={408:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Lit=void 0;const s=i(246),o=i(185);if(t.Lit=new class{project_id;initialized=!1;settings;hooked=!1;init(e,t){if(this.initialized)return console.warn("Already initialized");this.initialized=!0,this.project_id=e,this.settings={autoPageVisit:!0,customSession:this.generateSession(),...t},(0,o.isClient)()&&(this.pushVisit(),this.hookHistory())}hookHistory(){if(this.hooked)return;this.hooked=!0;const e=this,t=history.pushState;history.pushState=function(i,s,o){t.apply(this,[i,s,o]),e.pushVisit()},addEventListener("popstate",(()=>e.pushVisit()))}generateSession(){return(Math.random()*Date.now()).toFixed(0)}getSession(){if(!this.settings)return"NO_SESSION";if(!(0,o.isClient)())return"SERVER_SESSION";const e=sessionStorage.getItem("lit-user-session");if(e)return e;const t=this.generateSession();return this.settings.customSession=t,this.updateSession(t),t}updateSession(e){(0,o.isClient)()&&sessionStorage.setItem("lit-user-session",e)}event(e,t){if(!this.initialized)return console.error("Not initialized");if(!this.project_id)return console.error("project_id is required");const i=t?.session||this.getSession(),o=t?.metadata?JSON.stringify(t.metadata):void 0;(0,s.sendRequest)(this.project_id,{name:e,session:i,metadata:o,type:1})}pushVisit(){if((0,o.isClient)())return this.initialized?this.project_id?this.settings?void this.pushPageVisit(location.hostname,location.pathname,document.referrer||"self",this.getSession(),innerWidth||0,innerHeight||0,navigator.userAgent||""):console.error("You must call init before pushing"):console.error("project_id is required"):console.error("Not initialized")}async pushPageVisit(e,t,i,o,r,n,a,d){return this.initialized?this.project_id?void await(0,s.sendRequest)(this.project_id,{website:e,page:t,referrer:i,session:o,screenWidth:r,screenHeight:n,userAgent:a,metadata:d,type:0}):console.error("project_id is required"):console.error("Not initialized")}},(0,o.isClient)()){const e=document.querySelector("script[data-project]");if(e){const i=e.getAttribute("data-project");i&&t.Lit.init(i)}}},246:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendRequest=void 0;const s=i(185),o="broker.litlyx.com",r="/v1/metrics/push";t.sendRequest=function(e,t){console.log("Send request");try{if((0,s.isClient)())fetch("https://"+o+r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t,pid:e})}).catch((e=>{console.error("ERROR PUSHING",e)}));else{const s=i(453).request({hostname:o,path:r,port:443,method:"POST",headers:{"Content-Type":"application/json"}});s.on("error",(e=>console.error("ERROR PUSHING",e)));const n=JSON.stringify({...t,pid:e});s.write(n),s.end()}}catch(e){console.error("ERROR PUSHING",e)}}},185:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isClient=void 0,t.isClient=function(){return"object"==typeof window}},453:()=>{}},t={},function i(s){var o=t[s];if(void 0!==o)return o.exports;var r=t[s]={exports:{}};return e[s](r,r.exports,i),r.exports}(408);var e,t}));